[program:apex-rpc-mirror]
command=/home/ubuntu/apex/engine/venv/bin/uvicorn rpc_mirror:app --host 0.0.0.0 --port 8547 --workers 3 --timeout-keep-alive 30
directory=/home/ubuntu/apex/engine
autostart=true
autorestart=true
stderr_logfile=/home/ubuntu/apex/logs/rpc-mirror.err.log
stdout_logfile=/home/ubuntu/apex/logs/rpc-mirror.out.log
user=ubuntu
environment=UPSTREAM_RPC="https://arb1.arbitrum.io/rpc"

[program:apex-mempool-sniffer]
command=/home/ubuntu/apex/engine/venv/bin/python3 /home/ubuntu/apex/engine/mempool_sniffer.py
directory=/home/ubuntu/apex/engine
autostart=true
autorestart=true
stderr_logfile=/home/ubuntu/apex/logs/mempool-sniffer.err.log
stdout_logfile=/home/ubuntu/apex/logs/mempool-sniffer.out.log
user=ubuntu
environment=ARBITRUM_WS="ws://127.0.0.1:8548",MIN_MEMPOOL_VALUE="0.1"

[program:apex-trading-dragon]
command=/home/ubuntu/apex/engine/venv/bin/python3 /home/ubuntu/apex/engine/apex_trading_dragon.py
directory=/home/ubuntu/apex/engine
autostart=true
autorestart=true
stderr_logfile=/home/ubuntu/apex/logs/trading-dragon.err.log
stdout_logfile=/home/ubuntu/apex/logs/trading-dragon.out.log
user=ubuntu
stopwaitsecs=30
priority=999

[group:apex-full-stack]
programs=apex-rpc-mirror,apex-mempool-sniffer,apex-trading-dragon
